/**
 * Responsive Design & Cross-Browser Compatibility Utilities
 *
 * Supports: Chrome, Safari, Firefox, Edge
 * Mobile-first responsive breakpoints: sm (640px), md (768px), lg (1024px), xl (1280px)
 */

@layer base {
  /* Cross-browser font rendering optimization */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent text size adjustment on orientation change (iOS, Android) */
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

/* Custom scrollbar styles - Cross-browser support */
@layer utilities {
  /* Webkit browsers (Chrome, Safari, Edge) */
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: oklch(0.556 0 0 / 0.3);
    border-radius: 4px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: oklch(0.556 0 0 / 0.5);
  }

  /* Firefox */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: oklch(0.556 0 0 / 0.3) transparent;
  }

  /* Mobile-friendly smooth touch scrolling (iOS Safari) */
  .touch-scroll {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
  }

  /* Prevent text selection on mobile for UI elements */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Safe area padding for mobile devices with notches (iPhone X+) */
  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-inset-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-inset-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Mobile-optimized tap targets (minimum 44x44px for accessibility) */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent horizontal scrolling on mobile */
  .prevent-horizontal-scroll {
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Mobile-first responsive grid helpers */
  @media (max-width: 768px) {
    .mobile-stack {
      display: flex;
      flex-direction: column;
    }

    .mobile-hide {
      display: none !important;
    }

    .mobile-full-width {
      width: 100% !important;
    }
  }

  /* Tablet breakpoint helpers */
  @media (min-width: 768px) and (max-width: 1024px) {
    .tablet-hide {
      display: none !important;
    }
  }

  /* Desktop-only helpers */
  @media (min-width: 1024px) {
    .desktop-hide {
      display: none !important;
    }
  }

  /* Fix for iOS Safari 100vh issue (address bar) */
  .min-h-screen-mobile {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }

  /* Smooth scrolling for all browsers */
  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Grid auto-fit responsive pattern */
  .responsive-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
    gap: 1rem;
  }

  /* Flexbox gap fallback for older browsers */
  .flex-gap-4 {
    gap: 1rem;
  }

  @supports not (gap: 1rem) {
    .flex-gap-4 > * + * {
      margin-left: 1rem;
    }
  }
}

/* Cross-browser CSS custom property fallbacks */
@supports not (background: oklch(0 0 0)) {
  :root {
    --background: #ffffff;
    --foreground: #000000;
    --card: #ffffff;
    --card-foreground: #000000;
    --primary: #000000;
    --primary-foreground: #ffffff;
  }

  .dark {
    --background: #0a0a0a;
    --foreground: #fafafa;
    --card: #1a1a1a;
    --card-foreground: #fafafa;
  }
}
